!function(){"use strict";let e,t,n,o="",i="",s="",r=null;const a="https://oxford.cs.washington.edu/cse154/pokedex-2/",l="https://courses.cs.washington.edu/courses/cse154/webservices/pokedex/";function c(e="menu-view"){E("title").innerText="Game Menu",J([E("game-view"),E("main-menu-btn")]),Y([E(e),E("menu-view")]);let t=document.querySelectorAll(".low-health");for(let e=0;e<t.length;e++)t[e].classList.remove("low-health");let n=F(".buffs");for(let e=0;e<n.length;e++)n[e].innerHTML="";E("p1-turn-results").innerText="",E("p2-turn-results").innerText="",J(E("turn-status-p")),r&&(clearInterval(r),r=null)}function d(){O(this.id,"your-pokedex-view"),f("my-dex-view",t)}function p(){if(!o)return;window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty();let e=D(o),n="Would you like to give "+o+" a nickname?";if(e&&(n='Would you like to rename your "'+e+'"?'),!confirm(n))return;if(null===(e=prompt("Nickname to give your "+o+" (Leave empty to remove nickname):",e||"")))return;let i="Calling /pokedex/update with name="+o,s=new FormData;s.append("name",o),""!=e?(s.append("nickname",e),i+=" and nickname="+e):i+=" and no nickname",console.log(i),V("/pokedex/update",s,function(){alert("Success! You have renamed "+(""!=e?e:o)+"!"),f("pokedex-view",t),f("my-pokemon",t),f("my-dex-view",t);let n=o+(""!=e?" ("+e+")":"");F("#your-pokedex-view-card .name").innerText=n})}function u(){let e=F("#new-game-view chosen-btn");for(let t=0;t<e.length;t++)e[t].classList.remove("chosen-btn");J([F("#new-game-view .part-i"),F("#new-game-view .part-ii"),F("#new-game-view .part-iii")])}function m(){U(a+"list-games.php",Z(),L)}function f(e,n){let o=n===t;U(a+"users.php","?mode=pokemon&pid="+n,function(t){let n=JSON.parse(t);!function(e,t){let n=E(e);!function(e){let t=E(e).querySelectorAll(".sprite");for(let e=0;e<t.length;e++)t[e].classList.add("unfound"),t[e].onclick=""}(e);for(let o=0;o<t.length;o++){let i=n.querySelector("img[pokemon='"+z(t[o])+"']");i&&(i.classList.remove("unfound"),i.onclick="pokedex-view"==e?A:x)}}(e,n),o&&$()})}function h(){U(a+"list-trades.php",Z(),w)}function g(e,t){U(a+"trade-info.php",Z()+"&trade_id="+e,function(e){!function(e,t){let n=R("tr");n.id=e.id;let o=W("td","to-you"===t?e.offerer:e.offeree),i=R("td"),s=W("p",e.requested_pokemon),r=W("p",e.offered_pokemon),a=F("#pokedex-view .sprite[pokemon='"+e.requested_pokemon+"']").cloneNode();i.appendChild(s),s.appendChild(a);let l=R("td"),c=F("#pokedex-view .sprite[pokemon='"+e.offered_pokemon+"']").cloneNode();"to-you"===t?a.classList.remove("unfound"):c.classList.remove("unfound");l.appendChild(r),r.appendChild(c);let d=W("td",e.created),p=R("td");if(G(n,[o,l,i,d]),"to-you"==t){let e=R("button","small-btn");e.innerText="Accept",e.onclick=y;let t=R("button","small-btn");t.innerText="Reject",t.onclick=k,G(p,[e,t])}else{let e=R("button","small-btn");e.innerText="Cancel Request",p.appendChild(e),e.onclick=k}n.appendChild(p),F("#"+t+" .results-table tbody").appendChild(n)}(JSON.parse(e),t)})}function w(e){let t=JSON.parse(e);0===t.offers_from_me.length&&0===t.offers_to_me.length?(E("trade-message").innerHTML="There are no trades currently offered to you.",J([E("by-you"),E("to-you")]),Y(E("trade-message"))):function(e){let t=e.offers_to_me;t.length>0?F("#to-you .results-table").innerHTML="<tr><th>Player</th><th>Their Offer</th><th>Their Request</th><th>Date</th></tr>":F("#to-you .results-table").innerHTML="<p>You do not have any proposals to accept or decline.</p>";for(let e=0;e<t.length;e++){let n=t[e];g(n,"to-you")}let n=e.offers_from_me;n.length>0?F("#by-you .results-table").innerHTML="<tr><th>Player</th><th>Your Offer</th><th>Your Request</th><th>Date</th></tr>":F("#by-you .results-table").innerHTML="<p>You do not have any proposals waiting to be accepted or declined by other players.</p>";for(let e=0;e<n.length;e++){let t=n[e];g(t,"by-you")}J(E("trade-message")),Y([E("by-you"),E("to-you"),F("#by-you .results-table"),F("#to-you .results-table")])}(t)}function v(e){let n=JSON.parse(e),o=E("users");for(let e=0;e<n.length;e++)if(n[e]!=t){let t=document.createElement("option");t.value=n[e],t.innerText=n[e],o.appendChild(t);let i=document.createElement("option");i.value=n[e],i.innerText=n[e],E("opps").appendChild(i)}E("opps").value="medskm",E("users").value="medskm",E("opps").onchange=function(){i=this.value,Y(E("choose-pokemon-btn")),Y(E("start-game"))}}function y(){if(confirm("Are you sure you want to accept this trade?")){let n=this.parentNode.parentNode.id,o=new FormData;o.append("pid",t),o.append("token",e),o.append("action","accept");let i=this.parentNode.parentNode.querySelectorAll("td")[2].innerText.trim(),s=this.parentNode.parentNode.querySelectorAll("td")[1].innerText.trim();o.append("pokemon",i),o.append("trade_id",n),V(a+"conclude-trade.php",o,function(){alert("Trade successful!"),function(e,t){console.log("Calling student's /pokedex/trade with mypokemon="+e+" and theirpokemon="+t+"...");let n=new FormData;n.append("mypokemon",e),n.append("theirpokemon",t),V("/pokedex/trade",n,Q)}(i,s);let e="";confirm("You've collected "+s+" from a trade! Give it a nickname?")&&(e=prompt("Nickname to give your "+s+":")),e&&function(e,t){let n=new FormData;n.append("name",e),n.append("nickname",t),console.log("Calling student's /pokedex/update with name="+name+" and nickname="+t+"..."),V("/pokedex/update",n,Q)}(s,e),h()})}}function k(){if(confirm("Are you sure you want to cancel this trade?")){let n=this.parentNode.parentNode.id,o=new FormData;o.append("pid",t),o.append("token",e),o.append("pokemon",this.parentNode.parentNode.querySelectorAll("td")[2].innerText.trim()),o.append("tradeid",n),V(a+"cancel-trade.php",o,function(){alert("Trade successfully canceled"),h()})}}function b(){let n=E("offer").innerText,o=E("request").innerText;if(""!=n&&""!=o){let i=new FormData;i.append("pid",t),i.append("pid2",E("users").value),i.append("token",e),i.append("pokemon",n),i.append("pokemon2",o),V(a+"offer-trade.php",i,function(){alert("Proposal successful!"),E("view-proposals").click()})}else alert("Please select a Pokemon to offer and request from the displayed Pokedex views.")}function x(){this.parentNode.parentNode.querySelector("h2 span")?this.parentNode.parentNode.querySelector("h2 span").innerText=this.getAttribute("pokemon"):(o=this.getAttribute("pokemon"),A.call(this))}function L(e){let t=JSON.parse(e);if(t.offered_by_me||t.offered_to_me||t.in_progress){let e="<tr><th>Other Player</th></tr>";E("games-table").innerHTML=e,t.offered_by_me&&C("Pending","cancel",t.offered_by_me),t.offered_to_me&&C("Pending","accept",t.offered_to_me),t.in_progress&&C("current","join",t.in_progress)}else F("#invite-results h3").innerHTML="You currently have no games in progress or pending.";O("invite-btn","invite-view")}function T(e){let t=e.split("\n");for(let e=0;e<t.length;e++){let n=t[e].split(":"),o=n[0],i=n[1],s=R("img",["sprite","unfound"]);s.src=l+"sprites/"+i,s.setAttribute("pokemon",o),E("my-pokemon").appendChild(s),E("their-pokemon").appendChild(s.cloneNode()),E("pokedex-view").appendChild(s.cloneNode()),E("my-dex-view").appendChild(s.cloneNode())}}function C(e,n,o){for(let e=0;e<o.length;e++){let s=o[e][0],r=o[e][1];r==t&&(r=o[e][2]),r||(r="-bot-");let a=W("td",r),l=R("td"),c=R("button",["small-btn"]);if("accept"==n)c.innerText="Accept Invite",c.onclick=function(){i=this.parentNode.parentNode.querySelector("td").innerText,J(E("opponent-btns")),J(E("choose-student")),J(F("#new-game-view .part-ii")),i&&"-bot-"!=i&&(J(F("#new-game-view .part-iii hr")),E("choose-pokemon-title").innerText="Choose a Pokemon to play with "+i+":",f("pokedex-view",t),Y([F("#new-game-view"),F("#new-game-view .part-iii")]),J(E("invite-view")))},l.appendChild(c);else if("join"==n)c.innerText="Continue Game",l.appendChild(c),c.onclick=function(){P(this.parentNode.parentNode.id)};else if("cancel"==n){let e=W("span","Invite Pending");l.appendChild(e)}let d=R("tr");d.id=s,G(d,[a,l]),E("games-table").appendChild(d)}Y(E("games-table"))}function N(e){let n=e;console.log(n),n.warning?console.log(n.warning):(!function(e){let n=e.pid1,o=e.pid2,i=n==t?o:n,s=e.players[t],r=e.players[i],a=e[s],l=e[r];"-bot-"!=i&&(s==e.turn?(E("turn-status").innerText="It's your turn!",E("turn-status").classList.add("your-turn")):(E("turn-status").innerText="Waiting for "+i+" to make a move...",E("turn-status").classList.remove("your-turn")),Y(E("turn-status-p")));_("my-card",a),_("their-card",l),B("my-card",a),B("their-card",l)}(n),s=n.guid,E("title").innerText="Pokemon Battle Mode!",function(){let e=F(".opponent-btn");for(let t=0;t<e.length;t++)e[t].classList.remove("chosen-btn"),e[t].classList.remove("hidden");e=F(".menu-btn");for(let t=0;t<e.length;t++)e[t].classList.remove("chosen-btn")}(),H(),J([E("menu-view")]),Y([E("game-view"),E("main-menu-btn"),E("results-container")]))}function P(e){s=e,console.log("Updating current player game info."),U(a+"game-info.php",Z()+"&guid="+e,function(e){N(JSON.parse(e))}),r||(r=setInterval(P,1e4,e))}function S(){let e=["chosen-card","your-pokedex-view-card"],t={name:"Pokemon Name",hp:60,info:{type:"fire",weakness:"water",description:"Description here."},images:{photo:"images/pokeball.png",typeIcon:"icons/fighting.jpg",weaknessIcon:"icons/fighting.jpg"},moves:[{name:"Move Name Here",dp:"",type:"fighting"},{name:"Move Name Here",dp:"",type:"fighting"},{name:"Move Name Here",dp:"",type:"fighting"},{name:"Move Name Here",dp:"",type:"fighting"}]};o=null;for(let n=0;n<e.length;n++)_(e[n],t)}function _(e,t){F((e="#"+e)+" .name").innerText=t.name,F(e+" .pokepic").src=l+t.images.photo,F(e+" .weakness").src=l+t.images.weaknessIcon,F(e+" .type").src=l+t.images.typeIcon,F(e+" .info").innerText=t.info.description,F(e+" .hp").innerText=t.hp+"HP";let n=t.moves,o=F(e+" .moves button"),i=0;for(;i<n.length;i++){n[i].name;let t=o[i];t.classList.contains("hidden")&&t.classList.remove("hidden"),t.children[0].innerText=n[i].name,t.children[2].src=l+"icons/"+n[i].type+".jpg";let s=t.children[1];n[i].dp?s.innerText=n[i].dp+" DP":s.innerText="","#my-card"===e&&(t.disabled=!1,t.onclick=function(){q(this.children[0].innerText)})}if("#chosen-card"===e||"#my-card"===e||"#your-pokedex-view-card"===e){let n=t.name?D(t.name):"";n&&(F(e+" h2.name").innerText=t.name+" ("+n+")")}for(;i<4;)o[i].classList.add("hidden"),i++}function q(n){E("p1-turn-results").innerHTML="",E("p2-turn-results").innerHTML="",Y(E("loading")),n=n.toLowerCase();let o=new FormData;o.append("move",n),o.append("guid",s),o.append("pid",t),o.append("token",e);let i=new XMLHttpRequest;i.onreadystatechange=function(e){if(4===i.readyState)if(200===i.status)!function(e){let n=e.pid1,o=e.pid2,i=n==t?o:n,s=e.players[t],r=e.players[i],a=e[s],l=e[r];"-bot-"!=i?(s==e.turn?(E("turn-status").innerText="It's your turn!",E("turn-status").classList.add("your-turn")):(E("turn-status").innerText="Waiting for "+i+" to make a move...",E("turn-status").classList.remove("your-turn")),Y(E("turn-status-p"))):i=l.name;B("my-card",a),B("their-card",l);let c=e.results,d=c["p1-result"],p=c["p2-result"],u="p1"==s;if(""!=e.turn){if(p){let t=u?i:"You";p.startsWith("miss")&&(p="missed"),"p2"==e.turn?E("p1-turn-results").innerText=t+" played "+c["p2-move"]+" and "+p+"!":E("p2-turn-results").innerText=t+" played "+c["p2-move"]+" and "+p+"!"}if(d){d.startsWith("miss")&&(d="missed");let t=u?"You":i;"p2"==e.turn?E("p2-turn-results").innerText=t+" played "+c["p1-move"]+" and "+d+"!":E("p1-turn-results").innerText=t+" played "+c["p1-move"]+" and "+d+"!"}}else{let e=0==l["current-hp"];if(e){let e=u?c["p1-move"]:c["p2-move"],t=u?d:p;E("p1-turn-results").innerHTML="You played "+e+" and "+t+"!"}else{let e=u?c["p2-move"]:c["p1-move"],t=u?p:d;E("p1-turn-results").innerHTML=i+" played "+e+" and "+t+"!"}}J(E("loading")),Y([E("p1-turn-results"),E("p2-turn-results")])}(JSON.parse(this.responseText));else if(201===i.status){let e=JSON.parse(i.statusText).warning;console.log(e),E("turn-status").innerText="It's not your turn!",Y(E("turn-status-p")),J(E("loading"))}},i.open("POST",a+"move.php"),i.send(o)}function A(){E("start-game").classList.contains("hidden")&&E("start-game").classList.remove("hidden");let e=this.getAttribute("pokemon");""!=e&&(o=e,U(a+"pokedex.php","?pokemon="+e,function(e){let t=JSON.parse(e);_("chosen-card",t),_("my-card",t),_("your-pokedex-view-card",t)}))}function B(e,n){if(!n.error){let o=E(e);o.querySelector(".hp").innerText=n["current-hp"]+"HP",o.querySelector(".buffs").innerHTML="",function(e,t,n){for(let o=0;o<t.length+n.length;o++){let i=o<t.length?t[o]:n[o],s=document.createElement("div");s.className=o<t.length?"buff":"debuff",s.classList.add(i),e.appendChild(s)}}(F("#"+e+" .buffs"),n.buffs,n.debuffs);let i=1*n["current-hp"]/n.hp;if(o.querySelector(".health-bar").style.width=100*i+"%",i<=.2&&o.querySelector(".health-bar").classList.add("low-health"),"my-card"==e)0==i&&M(!1);else if("their-card"==e&&0==i){M(!0);n.images.photo;let e=n.name,o=E("my-pokemon").querySelector(".sprite[pokemon="+z(e)+"]");o&&o.classList.contains("unfound")&&function(e){let n="";confirm("You've collected "+e+"! Give it a nickname?")&&(n=prompt("Nickname to give your "+e+":"));null===n&&(n="");let o="Calling /pokedex/insert with name="+e,i=new FormData;i.append("name",e),""!=n?(i.append("nickname",n),o+=" and nickname="+n):o+=" and no nickname";console.log(o),V("/pokedex/insert",i,function(){let o=""!=n?n:e;alert("Success! You have added "+o+" to your Pokedex!"),f("pokedex-view",t),f("my-pokemon",t),f("my-dex-view",t)})}(e)}}J(E("loading"))}function M(e){S();let t=E("my-card").querySelectorAll(".moves button");J(E("turn-status-p"));for(let e=0;e<t.length;e++)t[e].disabled=!0;E("title").innerText="You "+(e?"won!":"lost!"),Y([E("results-container"),E("endgame")]),r&&(clearInterval(r),r=null)}function H(){let e=I();e&&e.classList.remove(".current-view");let t=document.querySelectorAll(".sub-menu");for(let e=0;e<t.length;e++)J(t[e])}function O(e,t){if(J(F("#new-game-view .part-iii")),E(e).classList.contains("chosen-btn"))E(e).classList.remove("chosen-btn"),H();else{let n=document.querySelectorAll(".sub-menu"),o=document.querySelectorAll(".chosen-btn");for(let t=0;t<o.length;t++)o[t]!=e&&o[t].classList.remove("chosen-btn");if(E(e).classList.add("chosen-btn"),E(t).classList.contains("hidden"))for(let e=0;e<n.length;e++)n[e]!=E(t)?(J(n[e]),n[e].classList.remove("current-view")):(Y(n[e]),n[e].classList.add("current-view"),"trade-view"===t&&(J(E("new-proposal-view")),J(E("current-proposals-view"))))}}function D(e){e=e.toLowerCase();let t=n.pokemon;for(let n=0;n<t.length;n++){let o=t[n].name.toLowerCase();if(o==e&&o.toUpperCase()!=t[n].nickname)return t[n].nickname}return null}function I(){return document.querySelector(".current-view")}function E(e){return document.getElementById(e)}function F(e){var t=document.querySelectorAll(e);return 1==t.length?t[0]:t}function J(e){if(e instanceof Array)for(var t=0;t<e.length;t++)e[t].classList.add("hidden");else e.classList.add("hidden")}function Y(e){if(e instanceof Array)for(var t=0;t<e.length;t++)e[t].classList.remove("hidden");else e.classList.remove("hidden")}function j(e){if(e instanceof Array)for(var t=0;t<e.length;t++)e[t].classList.toggle("hidden");else e.classList.toggle("hidden")}function R(e,t){var n=document.createElement(e);if(t&&""!=t)if(t instanceof Array)for(var o=0;o<t.length;o++)n.classList.add(t[o]);else n.classList.add(t);return n}function W(e,t){var n=document.createElement(e);return n.innerText=t,n}function G(e,t){for(var n=0;n<t.length;n++)e.appendChild(t[n]);return e}function z(e){for(var t=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","`","{","|","}","~"," "],n=0;n<e.length;n++)t.includes(e.charAt(n))&&(e=e.slice(0,n)+"\\"+e.slice(n),n+=1);return e}function U(e,t,n){fetch(e+t,{}).then(ee).then(n).catch(console.log)}function V(e,t,n){fetch(e,{method:"POST",body:t}).then(ee).then(n).catch(console.log)}function X(n){let o=n.split("\n");o.length<2?console.log("Error: /credentials does not output pid and token on separate lines."):(t=o[0],e=o[1],console.log("/credentials call finished. pid: "+t+", token: "+e))}function $(){console.log("Calling /pokedex/list..."),U("/pokedex/list","",function(e){n=JSON.parse(e),console.log("/pokedex/list returned: "),console.log(n)})}function K(e){var t=new FormData;t.append("name",e),console.log("Calling /pokedex/insert with name="+e+"..."),V("/pokedex/insert",t,function(){console.log("/pokedex/insert finished."),$()})}function Q(e){console.log("Finished call to /pokedex/trade. Response: ");let t=JSON.parse(e);console.log(t)}function Z(){return"?pid="+t+"&token="+e}function ee(e){return e.status>=200&&e.status<300||0==e.status?e.text():Promise.reject(new Error(e.status+": "+e.statusText))}window.addEventListener("load",function(){t&&e||(console.log("Calling /credentials..."),U("/credentials","",X)),U(a+"pokedex.php","?pokedex=all",T),U(a+"list-users.php","",v),$(),E("your-pokedex-btn").onclick=d,F("#your-pokedex-view-card .name").ondblclick=p,function(){let e=F(".opponent-btn");for(let t=0;t<e.length;t++)e[t].onclick=function(){J([F("#new-game-view .part-ii"),F("#new-game-view .part-iii")]),this.classList.toggle("chosen-btn");let t=F("#new-game-view button");for(let e=0;e<t.length;e++)t[e]!=this&&t[e].classList.remove("chosen-btn");for(let t=0;t<e.length;t++)if(e[t]!=this)if(this.classList.contains("chosen-btn"))e[t].classList.remove("chosen-btn"),"student"!=this.id&&J(E("choose-student")),Y(F("#new-game-view .part-ii"));else{J([F("#new-game-view .part-ii")]),J([F("#new-game-view .part-iii")]);let n=F("#new-game-view button");for(let e=0;e<n.length;e++)n[e].classList.remove("chosen-btn");Y(e[t])}"student"==this.id?(j(E("choose-student")),E("choose-student").classList.contains("hidden")||(i="medskm")):i=this.id}}(),E("new-game-btn").onclick=function(){O(this.id,"new-game-view"),E("new-game-view").classList.contains("hidden")||(u(),F("#new-game-view .part-0").classList.remove("hidden"))},E("choose-pokemon-btn").onclick=function(){f("pokedex-view",t),j(F("#new-game-view .part-iii")),this.classList.toggle("chosen-btn")},E("start-game").onclick=function(){""!=o&&(""==i&&(i="-bot-"),E("choose-pokemon-title").innerText="Choose a Pokemon:",u(),function(n){if(""==o)alert("Please select a Pokemon to start a game with.");else{let i=new FormData;i.append("opponent",n),i.append("mypokemon",o),i.append("pid",t),i.append("token",e),V(a+"create-game.php",i,function(e){"-bot-"==n||"invite-view"==I().id?(N(JSON.parse(e)),r||(r=setInterval(P,1e4,JSON.parse(e).guid))):(alert("Game invite sent successfully!"),m())})}}(i))},E("invite-btn").onclick=function(){m()},E("trade-btn").onclick=function(){O(this.id,"trade-view"),J(E("current-proposals-view")),J(E("new-proposal-view"))},E("propose").onclick=function(){this.classList.toggle("chosen-btn"),this.classList.contains("chosen-btn")&&E("view-proposals").classList.remove("chosen-btn"),J(E("current-proposals-view")),j(E("new-proposal-view")),E("new-proposal-view").classList.contains("hidden")&&(Y(E("show-p2-dex")),J(E("pokedices")))},E("propose-submit").onclick=b,E("view-proposals").onclick=function(){j(E("current-proposals-view")),this.classList.toggle("chosen-btn"),J(E("new-proposal-view")),this.classList.contains("chosen-btn")&&(E("propose").classList.remove("chosen-btn"),h())},E("show-p2-dex").onclick=function(){Y([F("#new-proposal-view .part-iv"),E("pokedices")]),this.classList.add("hidden"),f("my-pokemon",t),f("their-pokemon",E("users").value)},E("users").onchange=function(){f("my-pokemon",t),f("their-pokemon",E("users").value)},function(){const e={37:"left",38:"up",39:"right",40:"down",65:"a",66:"b"},t=["up","up","down","down","left","right","left","right","b","a"];let n=0;document.addEventListener("keydown",function(o){let i=e[o.keyCode],s=t[n];i==s?++n==t.length&&(alert("Welcome PonyTA."),function(e,t){var n=1,o=function(){0==--n&&(BrowserPonies.setBaseUrl(t.baseurl),BrowserPoniesBaseConfig.loaded||(BrowserPonies.loadConfig(BrowserPoniesBaseConfig),BrowserPoniesBaseConfig.loaded=!0),BrowserPonies.loadConfig(t),BrowserPonies.running()||BrowserPonies.start())};"undefined"==typeof BrowserPoniesConfig&&(window.BrowserPoniesConfig={}),"undefined"==typeof BrowserPoniesBaseConfig&&(++n,BrowserPoniesConfig.onbasecfg=o),"undefined"==typeof BrowserPonies&&(++n,BrowserPoniesConfig.oninit=o);var i=document.body||document.documentElement||document.getElementsByTagName("head")[0];for(var s in e)if(!document.getElementById(s))if(i){var r=document.createElement("script");r.type="text/javascript",r.id=s,r.src=e[s],i.appendChild(r)}else document.write('<script type="text/javscript" src="'+e[s]+'" id="'+s+'"><\/script>');o()}({"browser-ponies-script":"https://panzi.github.io/Browser-Ponies/browserponies.js","browser-ponies-config":"https://panzi.github.io/Browser-Ponies/basecfg.js"},{baseurl:"https://panzi.github.io/Browser-Ponies/",fadeDuration:500,volume:1,fps:25,speed:3,audioEnabled:!1,dontSpeak:!0,showFps:!1,showLoadProgress:!0,speakProbability:.1,spawn:{"rainbow dash":1}}),document.body.style.background="-webkit-linear-gradient(top, #2d96c6 0%,#c9e6f4 100%)",document.body.style.height="100vh",E("title").innerText="PonyTA MODE ACTIVE!",n=0):n=0})}(),E("main-menu-btn").onclick=function(){c("your-pokedex-view"),this.classList.add("hidden")},E("endgame").onclick=function(){c("your-pokedex-view"),this.classList.add("hidden")},E("restart-btn").onclick=function(){confirm("Are you sure you want to remove all Pokemon from your Pokedex and start with three new random Pokemon?")&&(!function(e,t,n){let o=new FormData;o.append("pid",e),o.append("token",t),n&&o.append("force","true");V(a+"restart.php",o,function(e){let t=JSON.parse(e);t.length>1&&function(e){let t=new FormData;console.log("Calling /pokedex/delete/all"),V("/pokedex/delete/all",t,function(t){console.log("/pokedex/delete/all finished"),console.log("The following pokedex should be empty:"),$();for(let t in e)K(e[t]);location.reload()})}(t)})}(t,e,!0),setTimeout(function(){f("my-dex-view",t),S()},1e3))},O("your-pokedex-btn","your-pokedex-view");let s=setInterval(function(){t&&e&&n&&(clearInterval(s),f("my-dex-view",t))},100)})}();